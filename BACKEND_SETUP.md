# Настройка Backend сервера для MentorApp

## Обзор

Для полной функциональности загрузки файлов необходимо запустить backend сервер. Без него приложение работает в демо режиме.

## Запуск Backend сервера

### 1. Переход в директорию backend

```bash
cd /Users/qb/work/mentor-ai/mentor-nest
```

### 2. Установка зависимостей

```bash
npm install
```

### 3. Настройка переменных окружения

Скопируйте файл `.env.example` в `.env`:

```bash
cp env.example .env
```

Отредактируйте `.env` файл с необходимыми настройками.

### 4. Запуск сервера

```bash
npm run start:dev
```

Сервер будет доступен по адресу: `http://localhost:4000`

## Проверка работы

### 1. Проверка API

Откройте в браузере: `http://localhost:4000/api/docs`

Должна открыться Swagger документация API.

### 2. Проверка загрузки файлов

В приложении MentorApp:
1. Выберите файл
2. Нажмите "Загрузить файл"
3. Должно появиться сообщение "Файл загружен и обработан успешно!"

## Режимы работы

### Демо режим (без backend)

- Файлы не загружаются на сервер
- Используются мок-данные
- Сообщение: "Файл загружен в демо режиме"

### Режим с backend

- Файлы загружаются на сервер
- Реальная обработка и анализ
- Сообщение: "Файл загружен и обработан успешно!"

## Troubleshooting

### Проблема: "timeout of 10000ms exceeded"

**Причина**: Backend сервер не запущен

**Решение**: Запустите backend сервер согласно инструкции выше

### Проблема: "Network Error"

**Причина**: Неправильный URL API

**Решение**: Проверьте настройки API в `src/services/api/apiService.ts`

### Проблема: "CORS Error"

**Причина**: Проблемы с CORS настройками

**Решение**: Проверьте CORS настройки в backend

## API Endpoints

### Загрузка файлов

```
POST /api/upload
Content-Type: multipart/form-data

Параметры:
- file: файл для загрузки
- transcriptionEnabled: boolean
- autoAnalysis: boolean
- language: string
- quality: string
```

### Получение файлов

```
GET /api/upload
Authorization: Bearer <token>
```

### Мониторинг прогресса

```
GET /api/upload/{id}/progress
Authorization: Bearer <token>
```

## Настройки

### Таймауты

- Загрузка файла: 30 секунд
- Обработка: 5 минут
- Анализ: 10 минут

### Ограничения

- Максимальный размер файла: 4GB
- Поддерживаемые форматы: видео, аудио, изображения
- Максимальное количество файлов: 100 на пользователя

## Мониторинг

### Логи

Логи сервера отображаются в консоли при запуске `npm run start:dev`

### Статусы файлов

- `uploading` - загрузка
- `processing` - обработка
- `analyzing` - анализ
- `completed` - завершено
- `failed` - ошибка

## Заключение

Backend сервер необходим для полной функциональности приложения. Без него приложение работает в демо режиме с ограниченными возможностями.


