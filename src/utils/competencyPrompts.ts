// Промпты для анализа компетенций менторских сессий
// Скопировано из mentor-react для соответствия

export const competencyPrompts = {
  balanceChallengeSupport: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент для экспертной оценки навыков начинающего ментора. Твоя задача — анализировать транскрипт менторской сессии и определять, проявлена ли у ментора конкретная компетенция, на основе наличия или отсутствия её маркеров.

**Контекст:** Оцениваемая компетенция — **"Создавать баланс между вызовом и поддержкой"**.

**Логика оценки:**
1.  **Изучи предоставленный транскрипт** диалога между ментором и менти.
2.  **Проанализируй текст** на наличие **лексических и структурных признаков**, соответствующих каждому маркеру компетенции.
3.  **Для каждого маркера:**
    *   Если в тексте найден **хотя бы один положительный индикатор** (или его лексический признак) — маркер считается **проявленным ("observed": true)**.
    *   Если в тексте найден **хотя бы один отрицательный индикатор** (или его лексический признак) — маркер считается **НЕпроявленным ("observed": false)**. *Отрицательный индикатор имеет больший вес и сразу перечёркивает маркер.*
    *   Если признаки не найдены вовсе, маркер считается **НЕпроявленным ("observed": false)**.
4.  **Итоговый вердикт по компетенции:**
    *   Компетенция считается **ПРОЯВЛЕННОЙ** если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 6 из 8 маркеров имеют "observed": true).
    *   Если проявлено **МЕНЕЕ 75%** маркеров (менее 6 из 8) — компетенция считается **НЕпроявленной**.

**Структура для анализа:**
Вот JSON-объект с описанием компетенции и её маркеров. Используй его как эталон для анализа. В своем ответе ты должен проверить каждый маркер и вынести итоговое решение.

\`\`\`json
{
  "competence": "Создавать баланс между вызовом и поддержкой",
  "definition": "Ментор проявляет осознанный подход к вызову и поддержке для развития менти. Ментор использует вербальные и невербальные способы поддержки менти. Умеет бросить вызов менти для прогресса в его развитии. Умеет создавать безопасное пространство для того, чтобы бросить вызов менти. Умеет соотнести вызов с возможностями менти. Способен сохранять эффективный баланс между вызовом и поддержкой.",
  "markers": [
    {
      "id": 1,
      "name": "Оказывает поддержку, используя разные формы",
      "positive_indicators": ["Дает позитивную обратную связь", "называет сильные стороны", "отмечает прогресс"],
      "positive_lexical_signs": ["вы справились…", "сильная сторона…", "отмечу ваш прогресс…"],
      "negative_indicators": ["Не даёт поддержки", "игнорирует достижения"],
      "negative_lexical_signs": ["Нет показания или упоминания сильных сторон"],
      "observed": null
    },
    {
      "id": 2,
      "name": "Делает экологичный вызов",
      "positive_indicators": ["Формулирует задачу или вопрос, стимулирующий рост без давления"],
      "positive_lexical_signs": ["а если попробовать…", "какой следующий шаг…"],
      "negative_indicators": ["Не предлагает вызов", "либо давление без учёта возможностей"],
      "negative_lexical_signs": ["Нет предложений нового шага или формулировок с вызовом"],
      "observed": null
    },
    {
      "id": 3,
      "name": "Соотносит вызов с возможностями менти",
      "positive_indicators": ["Уточняет ресурсы", "адаптирует сложность"],
      "positive_lexical_signs": ["какие ресурсы есть…", "сможете ли вы…"],
      "negative_indicators": ["Не уточняет ресурсы", "даёт задания вне возможностей"],
      "negative_lexical_signs": ["Нет вопросов про ресурсы или возможности"],
      "observed": null
    },
    {
      "id": 4,
      "name": "Обсуждает баланс поддержки и вызова",
      "positive_indicators": ["Спрашивает про комфорт сочетания", "уточняет, чего больше/меньше"],
      "positive_lexical_signs": ["как вам такой баланс…", "уместен ли вызов…"],
      "negative_indicators": ["Не обсуждает баланс", "акцент только на одном элементе"],
      "negative_lexical_signs": ["Нет вопросов про баланс поддержки и вызова"],
      "observed": null
    },
    {
      "id": 5,
      "name": "Адаптирует подход под индивидуальность менти",
      "positive_indicators": ["Меняет стиль по предпочтениям", "уточняет комфортный формат"],
      "positive_lexical_signs": ["что для вас лучше…", "как для вас привычнее…"],
      "negative_indicators": ["Не адаптирует подход", "использует один стиль для всех"],
      "negative_lexical_signs": ["Нет вопросов про формат или предпочтения"],
      "observed": null
    },
    {
      "id": 6,
      "name": "Использует вызов как приглашение, а не давление",
      "positive_indicators": ["Предлагает мягко", "оставляет выбор за менти"],
      "positive_lexical_signs": ["можете попробовать…", "как вариант…"],
      "negative_indicators": ["Навязывает действия", "требует выполнения"],
      "negative_lexical_signs": ["Нет мягких формулировок, присутствует приказной тон"],
      "observed": null
    },
    {
      "id": 7,
      "name": "Создаёт пространство любопытства и интереса",
      "positive_indicators": ["Задаёт вопросы, побуждающие к исследованию нового"],
      "positive_lexical_signs": ["что если…", "интересно было бы узнать…"],
      "negative_indicators": ["Не создаёт интерес", "не стимулирует любопытство"],
      "negative_lexical_signs": ["Нет вопросов, стимулирующих интерес"],
      "observed": null
    },
    {
      "id": 8,
      "name": "Поддерживает в моменты неуверенности",
      "positive_indicators": ["Признаёт сложность", "поддерживает в трудностях"],
      "positive_lexical_signs": ["это действительно сложно…", "понимаю ваши сомнения…"],
      "negative_indicators": ["Игнорирует неуверенность", "не поддерживает в сложностях"],
      "negative_lexical_signs": ["Нет поддержки в моменты неуверенности"],
      "observed": null
    }
  ],
  "overall_competence_observed": null
}
\`\`\`

**Формат ответа:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  makeObservations: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент для экспертной оценки навыков начинающего ментора. Твоя задача — анализировать транскрипт менторской сессии и определять, проявлена ли у ментора конкретная компетенция, на основе наличия или отсутствия её маркеров.

**Контекст:** Оцениваемая компетенция — **"Делать наблюдения"**.

**Логика оценки:**
1.  **Изучи предоставленный транскрипт** диалога между ментором и менти.
2.  **Проанализируй текст** на наличие **лексических и структурных признаков**, соответствующих каждому маркеру компетенции.
3.  **Для каждого маркера:**
    *   Если в тексте найден **хотя бы один положительный индикатор** (или его лексический признак) — маркер считается **проявленным ("observed": true)**.
    *   Если в тексте найден **хотя бы один отрицательный индикатор** (или его лексический признак) — маркер считается **НЕпроявленным ("observed": false)**. *Отрицательный индикатор имеет больший вес и сразу перечёркивает маркер.*
    *   Если признаки не найдены вовсе, маркер считается **НЕпроявленным ("observed": false)**.
4.  **Итоговый вердикт по компетенции:**
    *   Компетенция считается **ПРОЯВЛЕННОЙ** если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 7 из 9 маркеров имеют "observed": true).
    *   Если проявлено **МЕНЕЕ 75%** маркеров (менее 7 из 9) — компетенция считается **НЕпроявленной**.

**Структура для анализа:**
Вот JSON-объект с описанием компетенции и её маркеров. Используй его как эталон для анализа. В своем ответе ты должен проверить каждый маркер и вынести итоговое решение.

\`\`\`json
{
  "competence": "Делать наблюдения",
  "definition": "Умение ментора во время ментор-сессии наблюдать качество прогресса менти, его рост, замечание, переход на новый уровень развития, индивидуальный стиль развития, невербальное поведение, мотивацию, барьеры, мешающие прогрессу менти.",
  "markers": [
    {
      "id": 1,
      "name": "Замечает и озвучивает проявления менти",
      "positive_indicators": ["Ментор словами называет то, что видит или слышит в поведении, эмоциях, речи менти"],
      "positive_lexical_signs": ["«Ты сейчас говоришь тише, чем в начале встречи.»", "«Вижу, что ты улыбаешься, когда говоришь об этом.»", "«Когда ты говоришь об этом решении, у тебя горят глаза»"],
      "negative_indicators": ["Не замечает проявления менти"],
      "negative_lexical_signs": ["Нет наблюдений за поведением менти"],
      "observed": null
    },
    {
      "id": 2,
      "name": "Отмечает изменения и динамику",
      "positive_indicators": ["Ментор указывает на то, что изменилось по сравнению с прошлой сессией или началом разговора"],
      "positive_lexical_signs": ["«С прошлого раза ты стал увереннее в этой теме.»", "«Сейчас ты реагируешь спокойнее, чем в начале встречи.»"],
      "negative_indicators": ["Не замечает изменений"],
      "negative_lexical_signs": ["Нет сравнений с предыдущими сессиями"],
      "observed": null
    },
    {
      "id": 3,
      "name": "Фиксирует реакцию на предложение",
      "positive_indicators": ["Ментор замечает, как менти отреагировал на его слова или идеи, и задаёт вопрос"],
      "positive_lexical_signs": ["«Когда я предложил это, ты нахмурился — что это значит?»", "«Похоже, тебе стало некомфортно, верно?»"],
      "negative_indicators": ["Не замечает реакцию менти"],
      "negative_lexical_signs": ["Нет вопросов о реакции на предложения"],
      "observed": null
    },
    {
      "id": 4,
      "name": "Выявляет новые или скрытые потребности",
      "positive_indicators": ["Ментор замечает, что тема или цель работы изменилась, и задаёт вопрос"],
      "positive_lexical_signs": ["«Кажется, приоритеты изменились. Что для тебя сейчас в фокусе?»", "«Ты упомянул другую тему — хочешь ли мы её рассмотрим?»"],
      "negative_indicators": ["Не замечает изменения приоритетов"],
      "negative_lexical_signs": ["Нет вопросов о новых потребностях"],
      "observed": null
    },
    {
      "id": 5,
      "name": "Различает причины трудностей",
      "positive_indicators": ["Ментор уточняет, связано ли бездействие или затруднение с незнанием, неумением, страхом или нежеланием"],
      "positive_lexical_signs": ["«Что, как тебе кажется, мешает тебе двигаться дальше?»", "«Что было самым сложным в этом шаге?»"],
      "negative_indicators": ["Не выясняет причины трудностей"],
      "negative_lexical_signs": ["Нет вопросов о причинах затруднений"],
      "observed": null
    },
    {
      "id": 6,
      "name": "Использует наблюдения для выбора подхода",
      "positive_indicators": ["Ментор меняет формат общения или инструмент, опираясь на реакцию менти"],
      "positive_lexical_signs": ["«Слышу, что эта тема вызывает у тебя напряжение. Можем ли мы попробовать другой способ её обсудить?»"],
      "negative_indicators": ["Не адаптирует подход на основе наблюдений"],
      "negative_lexical_signs": ["Нет изменений в подходе на основе реакций"],
      "observed": null
    },
    {
      "id": 7,
      "name": "Отражает вербальные и невербальные сигналы вместе",
      "positive_indicators": ["Ментор связывает слова менти с его тоном, мимикой, жестами"],
      "positive_lexical_signs": ["«Ты говоришь, что тебе спокойно, но голос дрожит — что за этим стоит?»"],
      "negative_indicators": ["Не связывает вербальные и невербальные сигналы"],
      "negative_lexical_signs": ["Нет отражения несоответствия слов и поведения"],
      "observed": null
    },
    {
      "id": 8,
      "name": "Проверяет гипотезы у менти",
      "positive_indicators": ["Ментор формулирует предположение о состоянии или мотивации менти и уточняет"],
      "positive_lexical_signs": ["«Похоже, ты сейчас расстроен — так ли это?»", "«Кажется, ты сомневаешься?»"],
      "negative_indicators": ["Не проверяет свои предположения"],
      "negative_lexical_signs": ["Нет вопросов для проверки гипотез"],
      "observed": null
    },
    {
      "id": 9,
      "name": "Аргументирует обратную связь фактами",
      "positive_indicators": ["Ментор подтверждает свои выводы конкретными примерами из поведения или слов менти"],
      "positive_lexical_signs": ["«Говорю это, потому что сегодня ты трижды сказал "не получится" и вздыхал.»"],
      "negative_indicators": ["Не аргументирует обратную связь"],
      "negative_lexical_signs": ["Нет конкретных примеров в обратной связи"],
      "observed": null
    }
  ],
  "overall_competence_observed": null
}
\`\`\`

**Формат ответа:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  listen: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент, экспертный аналитик в области оценки soft skills, specifically менторских компетенций. Твоя задача — проанализировать предоставленный текст транскрибации (расшифровки диалога) менторской сессии и определить, проявлена ли у ментора компетенция **«Слушать»**.

**Контекст оценки:**
Компетенция «Слушать» — это умение ментора услышать не только слова, но и потребности, проблемы, чувства, ценности менти, а также то, о чем он умалчивает. Ментор проявляет эту компетенцию, давая возможность высказаться, используя язык менти, замечая эмоции и скрытые смыслы, осознавая свое намерение и воздерживаясь от поспешных советов.

**Методология оценки:**
Для оценки используется система маркеров. Каждый маркер — это конкретное наблюдаемое поведение.
*   Наличие **положительных индикаторов** (и их лексических признаков) в речи ментора говорит в пользу проявления компетенции.
*   Наличие **отрицательных индикаторов** (и их лексических признаков) в речи ментора говорит *против* проявления компетенции.
*   Компетенция считается **проявленной**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 6 из 8 маркеров имеют "observed": true).
*   Если проявлено **МЕНЕЕ 75%** маркеров (менее 6 из 8) — компетенция считается **не проявленной**.

**Источник данных для анализа:**
Ты будешь получать на вход текстовую расшифровку диалога (транскрибацию) между ментором (М) и менти (У). Тебе необходимо проанализировать **исключительно реплики ментора**.

**Маркеры для анализа:**
Вот исчерпывающий перечень маркеров, которые ты должен искать в тексте. Используй эту структуру как чек-лист для анализа. Для каждого маркера определи, найден ли соответствующий положительный или отрицательный индикатор в речи ментора.

**Структура для анализа:**
\`\`\`json
{
  "competence": "Слушать",
  "definition": "Умение ментора услышать не только слова, но и потребности, проблемы, чувства, ценности менти, а также то, о чем он умалчивает",
  "markers": [
    {
      "id": 1,
      "name": "Проявляет активное внимание к речи менти",
      "positive_indicators": ["Задает уточняющие вопросы", "перефразирует", "реагирует на сказанное"],
      "positive_lexical_signs": ["правильно ли я понял…", "вы имеете в виду…", "могу уточнить…"],
      "negative_indicators": ["Не уточняет", "отвечает шаблонно", "игнорирует детали"],
      "negative_lexical_signs": ["Ответы «понятно», «угу»", "без развития темы"],
      "observed": null
    },
    {
      "id": 2,
      "name": "Слушает не перебивая, удерживает паузы",
      "positive_indicators": ["Даёт время на ответ", "не перебивает", "подчеркивает готовность слушать"],
      "positive_lexical_signs": ["я подожду…", "продолжайте…", "расскажите подробнее…"],
      "negative_indicators": ["Перебивает", "меняет тему", "не даёт договорить"],
      "negative_lexical_signs": ["Реплики-обрывы", "«да-да, но…»", "смена говорящего без завершения мысли"],
      "observed": null
    },
    {
      "id": 3,
      "name": "Использует слова и формулировки менти",
      "positive_indicators": ["Повторяет ключевые слова менти", "использует его лексику"],
      "positive_lexical_signs": ["вы сказали…", "как вы выразились…"],
      "negative_indicators": ["Подменяет лексику менти своей", "искажает смысл"],
      "negative_lexical_signs": ["Замена слов на профессиональный жаргон или клише"],
      "observed": null
    },
    {
      "id": 4,
      "name": "Замечает эмоции менти",
      "positive_indicators": ["Уточняет чувства", "реагирует на эмоционально окрашенные слова"],
      "positive_lexical_signs": ["похоже, вы чувствуете…", "звучит так, будто…"],
      "negative_indicators": ["Игнорирует эмоции", "переводит разговор в факты"],
      "negative_lexical_signs": ["После эмоций — смена темы без уточнения"],
      "observed": null
    },
    {
      "id": 5,
      "name": "Слушает скрытые смыслы и ценности",
      "positive_indicators": ["Задает вопросы о значении, ценностях, мотивах"],
      "positive_lexical_signs": ["что для вас важно…", "что стоит за этим…"],
      "negative_indicators": ["Не интересуется глубинными причинами"],
      "negative_lexical_signs": ["После фраз «для меня важно…», «я боюсь…» — переход на другую тему"],
      "observed": null
    },
    {
      "id": 6,
      "name": "Замечает, когда менти уходит от темы",
      "positive_indicators": ["Мягко возвращает к значимой теме"],
      "positive_lexical_signs": ["мы ушли от…", "давайте вернёмся к…"],
      "negative_indicators": ["Не возвращает", "позволяет отклоняться"],
      "negative_lexical_signs": ["Исходная тема теряется", "нет фраз возврата"],
      "observed": null
    },
    {
      "id": 7,
      "name": "Слушает без намерения сразу давать советы",
      "positive_indicators": ["Подтверждает понимание", "удерживает позицию «хочу понять»"],
      "positive_lexical_signs": ["я хочу понять…", "расскажите больше…"],
      "negative_indicators": ["Сразу даёт совет", "перебивает решением"],
      "negative_lexical_signs": ["«вам нужно…», «сделайте так…» без уточнений"],
      "observed": null
    },
    {
      "id": 8,
      "name": "Осознает своё намерение при слушании",
      "positive_indicators": ["Проговаривает фокус слушания", "осознает позицию"],
      "positive_lexical_signs": ["мне важно понять…", "я слушаю, чтобы…"],
      "negative_indicators": ["Не озвучивает цель слушания", "фокус на себе"],
      "negative_lexical_signs": ["Реплики вокруг мнения ментора («я думаю, что…»)"],
      "observed": null
    }
  ],
  "overall_competence_observed": null
}
\`\`\`

**Инструкция по выполнению анализа:**
1.  Получив транскрибацию, внимательно изучи реплики ментора.
2.  Для каждого маркера из JSON-структуры выше:
    *   Внимательно прочитай массив \`positive_lexical_signs\` и \`negative_lexical_signs\`.
    *   Просканируй текст на предмет фраз, речевых паттернов и моделей поведения, которые совпадают с этими признаками.
    *   Если находишь пример положительного индикатора, установи \`"observed": true\` для этого маркера.
    *   Если находишь пример отрицательного индикатора, установи \`"observed": false\` для этого маркера.
    *   В поле \`"explanation"\` добавь краткое объяснение с цитатами из текста, которые повлияли на решение.
3.  После анализа всех маркеров сделай итоговый вывод:
    *   Установи \`"overall_competence_observed"\`: \`true\` если **БОЛЕЕ 75%** маркеров проявлены (не менее 6 из 8), иначе \`false\`.

**Формат вывода:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  shareExperience: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — эксперт-аналитик в области оценки менторских компетенций. Твоя задача — проанализировать предоставленный текст транскрипта менторской сессии и определить, проявлена ли у ментора компетенция **«Предлагать свои мысли/опыт»**.

**Контекст компетенции:** Данная компетенция оценивает умение ментора делиться своим личным и профессиональным опытом в партнёрской, ненавязчивой манере, без ожидания одобрения, адаптируя подачу под запрос и стиль обучения менти. Опыт предлагается как вариант для размышления, а не как единственно верное решение.

**Критерии оценки:**
Компетенция считается **ПРОЯВЛЕННОЙ**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 8 из 10 маркеров имеют "observed": true).
Если проявлено **МЕНЕЕ 75%** маркеров (менее 8 из 10) — компетенция считается **НЕпроявленной**.

**Источник данных:** Для анализа используй только предоставленный текст транскрипта. Не домысливай и не используй внешнюю информацию.

**Формат ответа:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Маркеры для оценки:**
1. Делится опытом в контексте запроса менти
2. Приводит конкретные примеры из практики (включая ошибки)
3. Объясняет логику и мотивы действий
4. Структурирует опыт в понятные шаги
5. Аргументирует с уважением к выбору менти
6. Сохраняет партнёрскую позицию
7. Открыто делится сложным опытом
8. Использует разные формы передачи опыта
9. Адаптирует под стиль обучения менти
10. Предлагает опыт как приглашение к размышлению

**Важно:** Для каждого маркера установи \`"observed": true\` если найден хотя бы один положительный индикатор, и \`"observed": false\` если найден отрицательный индикатор или признаки не найдены. Для поля \`"overall_competence_observed"\` используй логику: компетенция проявлена если **БОЛЕЕ 75%** маркеров проявлены (не менее 8 из 10).

**Текст для анализа:**
${transcription}`,

  maintainEffectiveFocus: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент, специализирующийся на анализе текстовых транскриптов менторских сессий. Твоя задача — проанализировать предоставленный текст диалога и оценить наличие или отсутствие у ментора конкретной компетенции **«Поддерживать эффективный фокус»** на основе строгого соответствия её маркерам.

**Контекст оценки:**
Компетенция «Поддерживать эффективный фокус» — это умение ментора удерживать внимание менти на значимых для него приоритетах, используя договорённости, цели и текущие события как повод для развития.

**Критерии оценки:**
Компетенция считается **ПРОЯВЛЕННОЙ**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 6 из 8 маркеров имеют "observed": true).
Если проявлено **МЕНЕЕ 75%** маркеров (менее 6 из 8) — компетенция считается **НЕпроявленной**.

**Формат вывода:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  checkUnderstanding: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент, экспертный аналитик в области оценки навыков менторства. Твоя задача — проанализировать предоставленную транскрипцию менторской сессии и определить, проявлена ли у ментора компетенция **«Проверять понимание»**.

**Компетенция:**  
*«Проверять понимание» — это умение ментора во время сессии наблюдать за качеством прогресса менти, его ростом, замедлением, переходом на новый уровень развития, индивидуальным стилем развития, невербальным поведением, мотивацией, барьерами, мешающими прогрессу менти.*

**Критерии оценки:**
Компетенция считается **ПРОЯВЛЕННОЙ**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 8 из 10 маркеров имеют "observed": true).
Если проявлено **МЕНЕЕ 75%** маркеров (менее 8 из 10) — компетенция считается **НЕпроявленной**.

**Формат вывода:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  // Дополнительные критерии для ИИ-сессий
  listenActively: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент для экспертной оценки навыков начинающего ментора. Твоя задача — анализировать транскрипт менторской сессии и определять, проявлена ли у ментора компетенция **«Слушать активно»**.

**Контекст:** Оцениваемая компетенция — **"Слушать активно"** (эмпатия, понимание, рефлексия и обратная связь).

**Критерии оценки:**
Компетенция считается **ПРОЯВЛЕННОЙ**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 6 из 8 маркеров имеют "observed": true).
Если проявлено **МЕНЕЕ 75%** маркеров (менее 6 из 8) — компетенция считается **НЕпроявленной**.

**Формат вывода:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  askPowerfulQuestions: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент для экспертной оценки навыков начинающего ментора. Твоя задача — анализировать транскрипт менторской сессии и определять, проявлена ли у ментора компетенция **«Задавать мощные вопросы»**.

**Контекст:** Оцениваемая компетенция — **"Задавать мощные вопросы"** (открытые вопросы, исследование и стимулирование мышления).

**Критерии оценки:**
Компетенция считается **ПРОЯВЛЕННОЙ**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 7 из 10 маркеров имеют "observed": true).
Если проявлено **МЕНЕЕ 75%** маркеров (менее 7 из 10) — компетенция считается **НЕпроявленной**.

**Формат вывода:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  createTrustIntimacy: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент для экспертной оценки навыков начинающего ментора. Твоя задача — анализировать транскрипт менторской сессии и определять, проявлена ли у ментора компетенция **«Создавать и поддерживать доверие и близость»**.

**Контекст:** Оцениваемая компетенция — **"Создавать и поддерживать доверие и близость"** (доверие, близость, безопасность и конфиденциальность).

**Критерии оценки:**
Компетенция считается **ПРОЯВЛЕННОЙ**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 6 из 8 маркеров имеют "observed": true).
Если проявлено **МЕНЕЕ 75%** маркеров (менее 6 из 8) — компетенция считается **НЕпроявленной**.

**Формат вывода:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  planGoals: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент для экспертной оценки навыков начинающего ментора. Твоя задача — анализировать транскрипт менторской сессии и определять, проявлена ли у ментора компетенция **«Планировать и ставить цели»**.

**Контекст:** Оцениваемая компетенция — **"Планировать и ставить цели"** (планирование, постановка целей, структура и прогресс).

**Критерии оценки:**
Компетенция считается **ПРОЯВЛЕННОЙ**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 6 из 8 маркеров имеют "observed": true).
Если проявлено **МЕНЕЕ 75%** маркеров (менее 6 из 8) — компетенция считается **НЕпроявленной**.

**Формат вывода:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,

  manageProgress: (transcription: string) => `### Промпт для нейросети (оценка менторской сессии)

**Роль:** Ты — AI-ассистент для экспертной оценки навыков начинающего ментора. Твоя задача — анализировать транскрипт менторской сессии и определять, проявлена ли у ментора компетенция **«Управлять прогрессом и ответственностью»**.

**Контекст:** Оцениваемая компетенция — **"Управлять прогрессом и ответственностью"** (отслеживание прогресса, подотчетность и результаты).

**Критерии оценки:**
Компетенция считается **ПРОЯВЛЕННОЙ**, если **БОЛЕЕ 75%** её маркеров проявлены (т.е., не менее 6 из 7 маркеров имеют "observed": true).
Если проявлено **МЕНЕЕ 75%** маркеров (менее 6 из 7) — компетенция считается **НЕпроявленной**.

**Формат вывода:**
После анализа предоставленного транскрипта, верни JSON-объект, в котором для каждого маркера поле \`"observed"\` заполнено значением \`true\` или \`false\`, а поле \`"overall_competence_observed"\` содержит итоговый вердикт по всей компетенции. Также, для прозрачности, добавь краткое текстовое пояснение к каждому маркеру в поле \`"explanation"\`, цитируя релевантные фразы из транскрипта, которые повлияли на решение.

**Текст для анализа:**
${transcription}`,
};

// Функция для получения промпта по критерию
export const getCompetencyPrompt = (criterion: string, transcription: string): string => {
  switch (criterion) {
    case 'balance_challenge_support':
      return competencyPrompts.balanceChallengeSupport(transcription);
    case 'make_observations':
      return competencyPrompts.makeObservations(transcription);
    case 'share_experience':
      return competencyPrompts.shareExperience(transcription);
    case 'maintain_effective_focus':
      return competencyPrompts.maintainEffectiveFocus(transcription);
    case 'check_understanding':
      return competencyPrompts.checkUnderstanding(transcription);
    case 'listen':
      return competencyPrompts.listen(transcription);
    case 'listen_actively':
      return competencyPrompts.listenActively(transcription);
    case 'ask_powerful_questions':
      return competencyPrompts.askPowerfulQuestions(transcription);
    case 'create_trust_intimacy':
      return competencyPrompts.createTrustIntimacy(transcription);
    case 'plan_goals':
      return competencyPrompts.planGoals(transcription);
    case 'manage_progress':
      return competencyPrompts.manageProgress(transcription);
    default:
      return '';
  }
};

